"""
====================================================================================================
CFD-Based Analysis of Nonlinear Aeroelastic Behavior of High-Aspect Ratio Wings

M. J. Smith, M. J. Patil, D. H. Hodges

Georgia Institute fo Technology, Atlanta

====================================================================================================

Comparisson of the results obtained by in the paper above with those generated by the tool developed
in this work

Author: Jo√£o Paulo Monteiro Cruvinel da Costa
"""

# ==================================================================================================
# IMPORTS

import numpy as np

# Import code sub packages
from context import src
from src import geometry as geo
from src import structures as struct

# ==================================================================================================
# GEOMETRY DEFINITION

# Wing section

# Aifoil name, only informative
naca0012 = "NACA 0012"

# Material properties, all equal to one as Smith et al only provies the stiffness characteristics
# of the wing
MATERIAL = struct.objects.Material(
    name="material",
    density=0.75,
    elasticity_modulus=1,
    rigidity_modulus=1,
    poisson_ratio=1,
    yield_tensile_stress=1,
    ultimate_tensile_stress=1,
    yield_shear_stress=1,
    ultimate_shear_stress=1,
)

# Wing section properties
WING_SECTION = geo.objects.Section(
    identifier=naca0012,
    material=MATERIAL,
    area=100000000000000000,
    Iyy=2e4,
    Izz=5e6,
    J=1e4,
    shear_center=0.5,
)

# --------------------------------------------------------------------------------------------------

# Wing surface

WING_ROOT_CHORD = 1
WING_TIP_CHORD = 1
SEMI_WING_LENGTH = 16
WING_SWEEP_ANGLE = 0
WING_DIHEDRAL = 45
WING_TIP_TORSION_ANGLE = 0


# Definition of the wing planform
left_wing_surface = geo.objects.Surface(
    identifier="left_wing",
    root_chord=WING_ROOT_CHORD,
    root_section=WING_SECTION,
    tip_chord=WING_TIP_CHORD,
    tip_section=WING_SECTION,
    length=SEMI_WING_LENGTH,
    leading_edge_sweep_angle_deg=WING_SWEEP_ANGLE,
    dihedral_angle_deg=WING_DIHEDRAL,
    tip_torsion_angle_deg=WING_TIP_TORSION_ANGLE,
    control_surface_hinge_position=None,
)

right_wing_surface = geo.objects.Surface(
    identifier="right_wing",
    root_chord=WING_ROOT_CHORD,
    root_section=WING_SECTION,
    tip_chord=WING_TIP_CHORD,
    tip_section=WING_SECTION,
    length=SEMI_WING_LENGTH,
    leading_edge_sweep_angle_deg=WING_SWEEP_ANGLE,
    dihedral_angle_deg=WING_DIHEDRAL,
    tip_torsion_angle_deg=WING_TIP_TORSION_ANGLE,
    control_surface_hinge_position=None,
)

# Creation of the wing macrosurface
wing = geo.objects.MacroSurface(
    position=np.array([0, 0, 0]),
    incidence=0,
    surface_list=[left_wing_surface, right_wing_surface],
    symmetry_plane="XZ",
    torsion_center=0.5,
)

# --------------------------------------------------------------------------------------------------

# Aircraft definition

smith_wing = geo.objects.Aircraft(
    name="Smith Wing",
    macrosurfaces=[wing],
    inertial_properties=geo.objects.MaterialPoint(),
)
